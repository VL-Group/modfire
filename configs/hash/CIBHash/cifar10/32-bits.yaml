$schema: "https://raw.githubusercontent.com/VL-Group/modfire/main/configs/schema.json"
comments: ""
model:
  key: HashModel
  params:
    bits: 32
    backbone: resnet50
    hashMethod:
      key: STEHash
      # params:
      #   temperature:
      #     key: Constant
      #     params:
      #       initValue: 1.0
train:
  earlyStop: 5
  epoch: 1000
  valFreq: 50
  numReturns: 1000
  trainer: BaseTrainer
  trainSet:
    key: CIFAR10
    params:
      root: data/easy/cifar10/
      batchSize: 256
      mode: Train
    pipeline:
      key: SelfSupervisedTrainingDataPipe
      params:
        nViews: 2
  querySet:
    key: CIFAR10
    params:
      root: data/easy/cifar10/
      batchSize: 128
      mode: Query
  database:
    key: CIFAR10
    params:
      root: data/easy/cifar10/
      batchSize: 128
      mode: Database
  saveDir: saved/cibhash/cifar10/32bits/
  criterion:
    key: CIBHash
    params:
      temperature: 0.3
      gamma: 0.001
      bits: 32
  externalLib: []
    # - some/modules/to/be/registered1.py
    # - some/modules/to/be/registered2.py
  optim:
    key: Lamb
    params:
      lr: 1.e-4
      # for Lamb: 0.01, for others: 1e-4
      weight_decay: 0.01
  schdr:
    key: CosineAnnealingLRWarmUp
    params:
      epoch: 1000
      warmupEpoch: 25
      warmupDecay: 1.e-2
  gpu:
    gpus: 1
    vRam: 18000
    wantsMore: false
